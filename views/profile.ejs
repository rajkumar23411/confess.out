<%- include("layouts/head") %>
<body>
    <%- include("layouts/navbar") %> 
    <%- include("layouts/menu") %> 
    <%- include('layouts/alert_success') %> 
    <section class="h-screen profileSection w-full  flex flex-col items-center justify-between pb-14">
        <section class="p-2 w-full">
            <div class="flex justify-start font-medium text-gray-100">Hi, <%= user.firstname %> </div>
            <div class="flex items-center justify-center flex-col">
                <div class="relative">
                    <img src="<%= user.avatar %> " alt="user profile image" class="h-32 rounded-full shadow-md shadow-gray-900">
                    <a href="/avatars" class="absolute bottom-1 right-1 bg-emerald-900 h-10 w-10 flex items-center justify-center rounded-full flex-col">
                        <ion-icon name="camera-outline" class="text-white text-2xl"></ion-icon>
                    </a>
                </div>
                <a href="/confessions" class="font-sans w-max mt-4 font-normal cursor-pointer flex items-center justify-center bg-blue-800 px-3 py-1 rounded text-gray-100 shadow shadow-gray-900">
                    My Confessions
                </a>
            </div>
        </section>
        <section class="bg-slate-50 dark:bg-gray-800 w-[97%] h-max flex items-center justify-center flex-col py-4 rounded">
            <form action="/update/name" method="post" class="w-[90%] flex flex-col gap-4 items-center justify-center">
                <div class="w-full flex flex-col gap-1">
                    <label for="firstname" class="text-sm text-gray-500 flex items-center font-sans dark:text-gray-400">First name</label>
                    <input type="text" name="firstname" value="<%= user.firstname %>" placeholder="your first name here" class="bg-slate-200  flex-1 text-base text-gray-600 font-medium p-2 rounded focus:border-b-2 focus:border-blue-300 focus:transition 0.5s dark:bg-gray-700 dark:text-gray-200">
                </div>
                <div class="w-full flex flex-col gap-1">
                    <label for="lasttname" class="text-sm text-gray-500 flex items-center font-sans dark:text-gray-400">Last name</label>
                    <input type="text" name="lastname" value="<%= user.lastname %>" placeholder="your last name here" class="bg-slate-200  flex-1 text-base text-gray-600 font-medium p-2 rounded focus:border-b-2 focus:border-blue-300 focus:transition 0.5s dark:bg-gray-700 dark:text-gray-200">
                </div>
                <input type="submit" value="Update name" class="w-max rounded-md  uppercase text-green-600 font-sans py-1 px-4 font-medium text-base dark:text-blue-500">
            </form>
            <div class="w-[90%] mt-4 gap-2 flex items-center flex-col">
                <div class="flex w-full flex-col gap-1">
                    <label for="email" class="text-sm text-gray-600 flex items-center font-sans dark:text-gray-400">Email</label>
                    <div class="flex-1 bg-slate-200 rounded-md p-2 flex items-center justify-between dark:bg-gray-700 dark:text-gray-200">
                        <span class="w-full text-base text-gray-700 font-normal font-sans dark:text-gray-200"><%= user.email%></span>
                        <a href="/update/email" class="text- font-semibold text-blue-700 dark:text-blue-500">Change</a>
                    </div>
                </div>
                <div class="flex w-full flex-col gap-1">
                    <label for="email" class="text-sm text-gray-500 flex items-center font-sans dark:text-gray-400">Joined On</label>
                    <span class="w-full flex-1 relative bg-slate-200 rounded-md p-2 text-base text-gray-700 font-normal font-sans dark:bg-gray-700 dark:text-gray-200"><%= moment(user.createdAt).format('LL') %></span>
                </div>
                <form action="/logout" method="post" class="logoutForm w-full">
                    <input type="submit" value="Log out" class="w-full rounded-md bg-sky-500 text-white font-sans py-1 px-5 mt-4 font-normal dark:bg-blue-800">
                </form>
                <form action="/delete_account" method="post" >
                    <input type="submit" value="Deactivate Account" class="w-full rounded-full  font-sans  font-medium text-red-600 text-sm">      
                </form>
            </div>
        </section>
    </section>
    <%- include('layouts/scripts') %>
</body>
</html>